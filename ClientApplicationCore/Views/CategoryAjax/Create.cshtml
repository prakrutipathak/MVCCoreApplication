<div id="loader" style="display:none;">
    <img src="~/images/loaderimage.gif" />
</div>
<h1>Add Category</h1>
<div id="myValidationSummary" class="text-danger" style="display:none;">
</div>
<form id="createCategoryForm">

    <div class="form-group">
        <label for="CategoryName" class="control-label">Category name</label>
        <input id="CategoryName" class="form-control" />
    </div>
    <div class="form-group">
        <label for="CategoryDescription" class="control-label">Category description</label>
        <input id="CategoryDescription" class="form-control" />
    </div>
    <div class="form-group">
        <input type="submit" value="Submit" class="btn btn-primary" />
        @* <a asp-action="Index" class="btn btn-default">Cancel</a> *@
    </div>
</form>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="~/js/categorycreate.js"></script>
<script>
    // $(document).ready(function () {
    //     $('#createCategoryForm').submit(function (e) {
    //         e.preventDefault() // Prevent default form submission.
    //         if (ValidationCategoryForm()) {
    //             let categoryName = $('#CategoryName').val().trim();
    //             let categoryDescription = $('#CategoryDescription').val().trim();

    //             var requestData = {
    //                 categoryName: categoryName,
    //                 categoryDescription: categoryDescription
    //             };
    //             $('#loader').show();
    //             $.ajax({
    //                 url: "http://localhost:5144/api/Category/Create",
    //                 type: "POST",
    //                 contentType: "application/json",
    //                 data: JSON.stringify(requestData),
    //                 success: function (response) {
    //                     ShowMessage(response.message);
    //                 },
    //                 error: function (xhr, status, error) {
    //                     // Check if there is a responseText available
    //                     if (xhr.responseText) {
    //                         try {
    //                             // Parse the responseText into a JavaScript object
    //                             var errorResponse = JSON.parse(xhr.responseText);

    //                             // Check the properties of the errorResponse object
    //                             if (errorResponse && errorResponse.message) {
    //                                 // Display the error message to the user
    //                                 alert('Error: ' + errorResponse.message);
    //                             } else {
    //                                 // Display a generic error message
    //                                 alert('An error occurred. Please try again.');
    //                             }
    //                         } catch (parseError) {
    //                             console.error('Error parsing response:', parseError);
    //                             alert('An error occurred. Please try again.');
    //                         }
    //                     } else {
    //                         // Display a generic error message if no responseText is available
    //                         alert('An unexpected error occurred. Please try again.');
    //                     }
    //                 },
    //                 complete: function () {
    //                     $('#loader').hide();
    //                 }
    //             });
    //         }
    //     });
    // });

    // function ValidationCategoryForm() {

    //     let categoryName = $('#CategoryName').val().trim();
    //     let categoryDescription = $('#CategoryDescription').val().trim();
    //     $('#myValidationSummary').empty().hide();
    //     let isValid = true;
    //     if (categoryName.length === 0) {
    //         $('#myValidationSummary').append('<p>Category name is required.</p>');
    //         isValid = false;
    //     }

    //     if (categoryDescription.length === 0) {
    //         $('#myValidationSummary').append('<p>Category description is required.</p>');
    //         isValid = false;
    //     }

    //     if (!isValid) {
    //         $('#myValidationSummary').show();
    //     }

    //     return isValid;
    // }
    // function ShowMessage(message) {
    //     // Get the message container
    //     var messageContainer = document.getElementById('messageContainer');

    //     // Display success message
    //     messageContainer.textContent = message;
    //     messageContainer.style.backgroundColor = '#4CAF50';
    //     messageContainer.style.opacity = '1';

    //     // Hide the message after 3 seconds (3000 milliseconds)
    //     setTimeout(function () {
    //         messageContainer.style.opacity = '0';
    //     }, 3000);

    //     // Redirect to index page after a short delay (optional)
    //     setTimeout(function () {
    //         window.location.href = '/CategoryAjax/Index';
    //     }, 3500); // Redirect after 3.5 seconds (3500 milliseconds)
    // }
</script>